<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year Nikita!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        /* --- CSS Styles --- */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; 
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #ffdde1 0%, #ee9ca7 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* START SCREEN */
        #start-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }

        #start-button {
            padding: 20px 50px;
            font-size: 2rem;
            background: #ff8fa3;
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            font-family: 'Dancing Script', cursive;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 25px #ff8fa3;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* MAIN DESK */
        #main-desk {
            display: none; /* Hidden until clicked */
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* NOTE CARD */
        .center-note {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff0f3;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            width: 500px;
            z-index: 50; /* Ensure text is on top */
            border: 2px dashed #ff8fa3;
        }

        .center-note h1 {
            font-family: 'Dancing Script', cursive;
            color: #ff8fa3;
            font-size: 3rem;
            margin: 0 0 20px 0;
        }

        #typing-text {
            font-size: 1.1rem;
            color: #444;
            white-space: pre-line;
            line-height: 1.6;
            text-align: left;
        }

        /* POLAROID PHOTOS */
        .polaroid {
            position: absolute;
            background: white;
            padding: 10px 10px 35px 10px; 
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            cursor: grab;
            width: 200px;
            border-radius: 3px;
            /* Fallback if image breaks, the white card remains */
            min-height: 250px; 
        }

        .polaroid img, .polaroid video {
            width: 100%;
            height: auto;
            display: block;
            border: 1px solid #ddd;
            pointer-events: none; /* Helps with dragging */
        }

        .polaroid:active {
            cursor: grabbing;
            z-index: 100 !important;
        }

        /* POSITIONS (Kept within safe screen limits) */
        #p1 { top: 10%; left: 10%; transform: rotate(-5deg); }
        #p2 { top: 15%; right: 15%; transform: rotate(8deg); }
        #p3 { bottom: 15%; left: 15%; transform: rotate(5deg); }
        #p4 { bottom: 10%; right: 10%; transform: rotate(-8deg); }
        #p5 { top: 50%; left: 5%; transform: rotate(-12deg) translate(0, -50%); }
        
        /* VIDEO POSITION */
        #v1 { 
            top: 50%; 
            right: 5%; 
            transform: rotate(6deg) translate(0, -50%);
            width: 240px;
        }

        .vid-caption {
            text-align: center;
            font-size: 14px;
            color: #888;
            margin-top: 5px;
            font-family: 'Dancing Script';
        }

    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <div id="start-screen">
        <button id="start-button">âœ¨ Click for Surprise âœ¨</button>
    </div>

    <div id="main-desk">
        
        <div class="center-note">
            <h1>Happy New Year!</h1>
            <div id="typing-text"></div>
        </div>

        <div class="polaroid" id="p1"><img src="photo1.jpeg" alt="Photo 1"></div>
        <div class="polaroid" id="p2"><img src="photo2.jpeg" alt="Photo 2"></div>
        <div class="polaroid" id="p3"><img src="photo3.jpeg" alt="Photo 3"></div>
        <div class="polaroid" id="p4"><img src="photo4.jpeg" alt="Photo 4"></div>
        <div class="polaroid" id="p5"><img src="photo5.jpeg" alt="Photo 5"></div>

        <div class="polaroid" id="v1" onclick="toggleMute()">
            <video id="vid" src="video.mp4" autoplay loop muted playsinline></video>
            <div class="vid-caption" id="vid-cap">ðŸ”‡ Tap to unmute</div>
        </div>

    </div>

    <script>
        // --- CONFIGURATION ---
        const message = `Happy New Year, Nikita ðŸŒ¸

This year I realised how special some people quietly become in our livesâ€¦ and youâ€™re definitely one of them.

Thank you for your care, your time, and the way you just understand. (Ab jyaada sar pe mt chaddna)

Humeshaaa Khush reh, tandroost reh aur, Muskuraati reh coz Muskuraate hue jyada sundr lgti aap..`;

        // --- ELEMENTS ---
        const startBtn = document.getElementById('start-button');
        const startScreen = document.getElementById('start-screen');
        const mainDesk = document.getElementById('main-desk');
        const music = document.getElementById('bg-music');
        const typingBox = document.getElementById('typing-text');
        const video = document.getElementById('vid');
        const videoCap = document.getElementById('vid-cap');

        // --- START EVENT ---
        startBtn.addEventListener('click', () => {
            // 1. Play Music
            music.volume = 0.5;
            music.play().then(() => {
                console.log("Music playing");
            }).catch(e => {
                console.log("Music failed (browser blocked):", e);
                alert("Please click anywhere on the screen if music didn't start!");
            });

            // 2. Confetti
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });

            // 3. Transition
            startScreen.style.opacity = '0';
            setTimeout(() => {
                startScreen.style.display = 'none';
                mainDesk.style.display = 'block';
                startTyping();
            }, 800);
        });

        // --- TYPING EFFECT ---
        let charIndex = 0;
        function startTyping() {
            if (charIndex < message.length) {
                typingBox.textContent += message.charAt(charIndex);
                charIndex++;
                setTimeout(startTyping, 50);
            }
        }

        // --- VIDEO MUTE TOGGLE ---
        function toggleMute() {
            if(video.muted) {
                video.muted = false;
                videoCap.textContent = "ðŸ”Š Tap to mute";
                music.volume = 0.2; // Lower bg music
            } else {
                video.muted = true;
                videoCap.textContent = "ðŸ”‡ Tap to unmute";
                music.volume = 0.5; // Raise bg music
            }
        }

        // --- DRAG AND DROP (DESKTOP) ---
        const draggables = document.querySelectorAll('.polaroid, .center-note');
        let isDown = false;
        let startX, startY, initialLeft, initialTop;
        let activeItem = null;

        draggables.forEach(item => {
            item.addEventListener('mousedown', (e) => {
                isDown = true;
                activeItem = item;
                item.style.zIndex = 100; // Bring to front
                
                // Get mouse start position
                startX = e.clientX;
                startY = e.clientY;

                // Get element current position
                const rect = item.getBoundingClientRect();
                // We need the offset relative to the parent, but since we are using 
                // absolute positioning with %, we need to switch to pixels for dragging to work smoothly
                item.style.left = item.offsetLeft + 'px';
                item.style.top = item.offsetTop + 'px';
                
                initialLeft = item.offsetLeft;
                initialTop = item.offsetTop;
            });
        });

        document.addEventListener('mouseup', () => {
            isDown = false;
            if (activeItem) {
                // Return z-index to normal-ish but keep above background
                activeItem.style.zIndex = 10;
                activeItem = null;
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDown || !activeItem) return;
            e.preventDefault();
            
            const dx = e.clientX - startX;
            const dy = e.clientY - startY;

            activeItem.style.left = (initialLeft + dx) + 'px';
            activeItem.style.top = (initialTop + dy) + 'px';
        });

    </script>
</body>
</html>